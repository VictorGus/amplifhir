// Compiled by ClojureScript 1.10.520 {}
goog.provide('app.patient.crud.form');
goog.require('cljs.core');
goog.require('re_frame.core');
goog.require('zenform.model');
goog.require('zenform.validators');
app.patient.crud.form.form_path = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Keyword(null,"edit","edit",-1641834166)], null);
app.patient.crud.form.form_schema = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Keyword(null,"fields","fields",-1932066230),new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"given","given",716253602),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"patronymic","patronymic",849810518),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"address","address",559499426),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"collection","collection",-683361892),new cljs.core.Keyword(null,"item","item",249373802),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.Keyword(null,"fields","fields",-1932066230),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"city","city",-393302614),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"postalCode","postalCode",717396150),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"state","state",-1988618099),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"country","country",312965309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null)], null)], null)], null),new cljs.core.Keyword(null,"birthDate","birthDate",-495062262),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586)], null),new cljs.core.Keyword(null,"gender","gender",-733930727),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586),new cljs.core.Keyword(null,"items","items",1031954938),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"value","value",305978217),"male",new cljs.core.Keyword(null,"display","display",242065432),"\u041C\u0443\u0436\u0441\u043A\u043E\u0439"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"value","value",305978217),"female",new cljs.core.Keyword(null,"display","display",242065432),"\u0416\u0435\u043D\u0441\u043A\u0438\u0439"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"value","value",305978217),"other",new cljs.core.Keyword(null,"display","display",242065432),"\u0414\u0440\u0443\u0433\u043E\u0439"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"value","value",305978217),"unknown",new cljs.core.Keyword(null,"display","display",242065432),"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043D"], null)], null)], null),new cljs.core.Keyword(null,"identifier","identifier",-805503498),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"string","string",-1989541586),new cljs.core.Keyword(null,"validators","validators",-1973346672),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"required","required",1807647006),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"message","message",-406056002),"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043D\u043E\u043C\u0435\u0440 \u041E\u041C\u0421"], null)], null)], null)], null)], null);
re_frame.core.reg_event_fx.call(null,new cljs.core.Keyword("app.patient.crud.form","init","app.patient.crud.form/init",-817686168),(function (p__23013,p__23014){
var map__23015 = p__23013;
var map__23015__$1 = (((((!((map__23015 == null))))?(((((map__23015.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__23015.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__23015):map__23015);
var db = cljs.core.get.call(null,map__23015__$1,new cljs.core.Keyword(null,"db","db",993250759));
var vec__23016 = p__23014;
var _ = cljs.core.nth.call(null,vec__23016,(0),null);
var map__23019 = cljs.core.nth.call(null,vec__23016,(1),null);
var map__23019__$1 = (((((!((map__23019 == null))))?(((((map__23019.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__23019.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__23019):map__23019);
var resource = cljs.core.get.call(null,map__23019__$1,new cljs.core.Keyword(null,"resource","resource",251898836));
return new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"dispatch","dispatch",1319337009),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("zf","init","zf/init",-1875485326),app.patient.crud.form.form_path,app.patient.crud.form.form_schema,(function (){var resource__$1 = cljs.core.update.call(null,resource,new cljs.core.Keyword(null,"name","name",1843675177),((function (map__23015,map__23015__$1,db,vec__23016,_,map__23019,map__23019__$1,resource){
return (function (p__23022){
var vec__23023 = p__23022;
var n = cljs.core.nth.call(null,vec__23023,(0),null);
var vec__23026 = new cljs.core.Keyword(null,"given","given",716253602).cljs$core$IFn$_invoke$arity$1(n);
var given = cljs.core.nth.call(null,vec__23026,(0),null);
var patronymic = cljs.core.nth.call(null,vec__23026,(1),null);
return cljs.core.merge.call(null,n,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"given","given",716253602),given,new cljs.core.Keyword(null,"patronymic","patronymic",849810518),patronymic], null));
});})(map__23015,map__23015__$1,db,vec__23016,_,map__23019,map__23019__$1,resource))
);
return cljs.core.dissoc.call(null,cljs.core.merge.call(null,resource__$1,cljs.core.select_keys.call(null,cljs.core.get.call(null,resource__$1,new cljs.core.Keyword(null,"name","name",1843675177)),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"given","given",716253602),new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.Keyword(null,"patronymic","patronymic",849810518)], null))),new cljs.core.Keyword(null,"name","name",1843675177));
})()], null)], null);
}));
app.patient.crud.form.eval_form = (function app$patient$crud$form$eval_form(db,fx){
var map__23029 = zenform.model.eval_form.call(null,cljs.core.get_in.call(null,db,app.patient.crud.form.form_path));
var map__23029__$1 = (((((!((map__23029 == null))))?(((((map__23029.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__23029.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.call(null,cljs.core.hash_map,map__23029):map__23029);
var errors = cljs.core.get.call(null,map__23029__$1,new cljs.core.Keyword(null,"errors","errors",-908790718));
var form = cljs.core.get.call(null,map__23029__$1,new cljs.core.Keyword(null,"form","form",-1624062471));
var value = cljs.core.get.call(null,map__23029__$1,new cljs.core.Keyword(null,"value","value",305978217));
var content = cljs.core.dissoc.call(null,cljs.core.assoc.call(null,value,new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.merge.call(null,cljs.core.select_keys.call(null,value,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"family","family",-1313145692)], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"given","given",716253602),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"given","given",716253602).cljs$core$IFn$_invoke$arity$1(value),new cljs.core.Keyword(null,"patronymic","patronymic",849810518).cljs$core$IFn$_invoke$arity$1(value)], null)], null))], null)),new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.Keyword(null,"given","given",716253602),new cljs.core.Keyword(null,"patronymic","patronymic",849810518));
if(cljs.core.empty_QMARK_.call(null,errors)){
return fx.call(null,content);
} else {
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"db","db",993250759),cljs.core.assoc_in.call(null,db,app.patient.crud.form.form_path,form),new cljs.core.Keyword(null,"dispatch","dispatch",1319337009),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("flash","danger","flash/danger",-654742654),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"msg","msg",-1386103444),new cljs.core.Keyword(null,"required","required",1807647006).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,cljs.core.vals.call(null,errors)))], null)], null)], null);
}
});

//# sourceMappingURL=form.js.map
